@@include('inc/top.html')

<body>
  @@include('inc/header.html')
  <!-- Contents -->
  <div class="contents wrap">
    <div class="notice_area">
      <h2 class="tit_h2">나의 중점관리자원 응원요청 <span>(서울특별시 종로구)</span></h2>
      <div class="tab" data-tab="tab">
        <ul class="tab_lst" data-tab="lst">
          <li><a href="#tab01" class="on">응원 요청</a></li>
          <li><a href="#tab02">응원 수락</a></li>
          <li><a href="#tab03">응원 이력</a></li>
        </ul>
      </div>
      <div class="tab_container" data-tab="container">
        <div id="tab01" class="section tab_cont" data-tab="cont">
          <div class="search">
            <ul class="flex_wrap f_sb">
              <li><ul>
                  <li>
                    <label for="">재난분류</label>
                    <select name="" title="">
                      <option value="전체">전체</option>
                      <option value="자연재난">자연재난</option>
                      <option value="사회재난">사회재난</option>
                    </select>
                    <select name="" title="">
                      <option value="전체">전체</option>
                      <option value="호우">호우</option>
                      <option value="지진">지진</option>
                    </select>
                  </li>
                  <li>
                    <label for="typesort">자원분류</label>
                    <select id="typesort" title="자원 분류">
                      <option value="대분류">대분류</option>
                    </select>
                    <select id="typesort" title="자원 분류">
                      <option value="중분류">중분류</option>
                    </select>
                    <select id="typesort" title="자원 분류">
                      <option value="소분류">소분류</option>
                    </select>
                  </li>
              </ul></li>
              <li><ul>                    
                  <li>
                    <label for="name02">자원명</label>
                    <input type="text" id="name02">
                  </li>
              </ul></li>
              <li>
                <div class="btn_wrap">
                  <button type="button" class="btn btn_blue">검색</button>
                  <button type="button" class="btn btn_greenline">엑셀저장</button>
                </div>
              </li>
            </ul>
          </div>
          <div class="tbl_wrap">
            <table id="jqgrid" class="jq-grid"></table>
            <div id="pager_tab01"></div>
          </div>
        </div>
        <div id="tab02" class="section tab_cont" data-tab="cont">
          <div class="tbl_wrap marginfix">
            <table id="jqgrid2" class="jq-grid"></table>
            <div id="pager_tab02"></div>
          </div>
        </div>
        <div id="tab03" class="section tab_cont" data-tab="cont">
          <div class="search">
            <div class="search_top select_wrap" data-tab="tab">
              <label for="">응원 요청 구분</label>
              <div class="select_custom">
                <button id="prio" class="label">
                  <a href="#request">응원요청</a>
                </button>
                <ul class="optionList" data-tab="lst">
                  <li class="optionItem" tabindex="0"><a href="#request" data-value="1">응원요청</a></li>
                  <li class="optionItem" tabindex="0"><a href="#receipt" data-value="2">응원접수</a></li>
                </ul>
              </div>
            </div>
            <div class="tab_container" data-tab="container">
              <ul id="request" class="flex_wrap" data-tab="cont">
                <li>
                  <ul>
                    <li>
                      <label for="dsst_cl">재난분류</label> 
                      <select id="dsst_cl" name="" title="">
                        <option value="전체">전체</option>
                        <option value="자연재난">자연재난</option>
                        <option value="사회재난">사회재난</option>
                      </select>
                      <select id="dsst_ty" name="" title="">
                        <option value="전체">전체</option>
                        <option value="호우">호우</option>
                        <option value="지진">지진</option>
                      </select>
                    </li>                  
                    <li>
                      <label for="div_lg_cd">자원분류</label>
                      <select name="" title="" id="div_lg_cd">
                        <option value="전체">전체</option>
                      </select>
                      <select name="" title="" id="div_md_cd">
                        <option value="전체">전체</option>
                      </select>
                      <select name="" title="" id="div_sm_cd">
                        <option value="전체">전체</option>
                      </select>
                    </li>
                  </ul>
                </li>
                <li>
                  <ul>
                    <li>
                      <label for="">요청일자</label>
                      <div class="period">
                        <input type="date" data-date="from">
                        <input type="date" data-date="to">
                      </div>                  
                    </li>                  
                    <li>
                      <label for="">자원명</label>
                      <input type="text" list="resource_lst">
                      <datalist id="resource_lst">
                        <option value="자원1"></option>
                        <option value="자원2"></option>
                        <option value="자원3"></option>
                      </datalist>
                    </li>
                    
                  </ul>
                </li>
                <li>
                  <ul>
                    <li>
                      <label for="">응원상태</label>
                      <select name="" title="">
                        <option value="전체">전체</option>
                      </select>
                    </li>
                    <li>
                    
                  <div class="btn_wrap">
                    <button type="button" class="btn btn_blue">검색</button>
                    <button type="button" class="btn btn_greenline">엑셀저장</button>
                  </div>
                    </li>
                  </ul>
                </li>
              </ul>
              <ul id="receipt" class="flex_wrap" data-tab="cont">
                <li>
                  <ul>
                    <li>
                      <label for="dsst_cl">재난분류</label> 
                      <select id="dsst_cl" name="" title="">
                        <option value="전체">전체</option>
                        <option value="자연재난">자연재난</option>
                        <option value="사회재난">사회재난</option>
                      </select>
                      <select id="dsst_ty" name="" title="">
                        <option value="전체">전체</option>
                        <option value="호우">호우</option>
                        <option value="지진">지진</option>
                      </select>
                    </li>                  
                    <li>
                      <label for="div_lg_cd">자원분류</label>
                      <select name="" title="" id="div_lg_cd">
                        <option value="전체">전체</option>
                      </select>
                      <select name="" title="" id="div_md_cd">
                        <option value="전체">전체</option>
                      </select>
                      <select name="" title="" id="div_sm_cd">
                        <option value="전체">전체</option>
                      </select>
                    </li>
                    <li>
                      <label for="userSelOrgan">기관분류</label>
                      <select id="userSelOrgan" name="userSelOrgan" title="">
                        <option value="전체">전체</option>
                      </select>
                      <select id="userSelOrgan2" name="" title="">
                        <option value="전체">전체</option>
                      </select>
                      <input type="text" id="organ_nm" placeholder="기관명" list="org_lst" />
                      <datalist id="org_lst">
                        <option value="경기도청"></option>
                        <option value="행정안전부"></option>
                        <option value="한국전력"></option>
                      </datalist>
                    </li>
                  </ul>
                </li>
                <li>
                  <ul>
                    <li>
                      <label for="">요청일자</label>
                      <div class="period">
                        <input type="date" data-date="from">
                        <input type="date" data-date="to">
                      </div>                  
                    </li>                  
                    <li>
                      <label for="">자원명</label>
                      <input type="text" list="resource_lst">
                      <datalist id="resource_lst">
                        <option value="자원1"></option>
                        <option value="자원2"></option>
                        <option value="자원3"></option>
                      </datalist>
                    </li>
                    <li>
                      <label for="">응원상태</label>
                      <select name="" title="">
                        <option value="전체">전체</option>
                      </select>
                    </li>
                  </ul>
                </li>
                <li>
                  <div class="btn_wrap">
                    <button type="button" class="btn btn_blue">검색</button>
                    <button type="button" class="btn btn_greenline">엑셀저장</button>
                  </div>
                </li>
              </ul>
            </div>
          </div>
          <div class="tbl_wrap">
            <table id="jqgrid3" class="jq-grid"></table>
            <div id="pager_tab03"></div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- // Contents -->
  @@include('inc/footer.html')

  <!-- 재난관리자원 응원처리 -->
  @@include('inc/p_disman04_1.html')
  <!--// 재난관리자원 응원처리 -->
  <!-- 재난관리자원 응원요청 -->
  @@include('inc/pop/p_support_request.html')
  <!--// 재난관리자원 응원요청 -->

  <script>
    var mydata = [
      { 't1': '장비', 't2': '오염제거기', 't3': '방역용 소독기', 't4': '10', 't5': '22', 't6': '12', 't7': '10', 't8': '대', 't9': 'process' },
      { 't1': '장비', 't2': '오염제거기', 't3': '방역용 소독기', 't4': '10', 't5': '22', 't6': '12', 't7': '10', 't8': '대', 't9': 'request' },
    ]
    $("#jqgrid").jqGrid({
      data: mydata,
      datatype: "local",
      colModel: [
        { label: '분류', name: 't1' },
        { label: '자원명', name: 't2' },
        { label: '세부품명', name: 't3' },
        { label: '시스템 권장량', name: 't4' },
        { label: '총 비축량', name: 't5' },
        { label: '적정 비축량', name: 't6' },
        { label: '응원 가능량', name: 't7' },
        { label: '단위', name: 't8' },
        { label: '해당 재난', name: 't9', formatter: axiBtn, icotype:'set'}
      ],
      height: 'auto',
      rownumbers: true,
      viewrecords: true,
      rowTotal: -1,
      rowNum: 10,
      autowidth: true,
      pager: "#pager_tab01"
    });

     var mydata1 = [
        { 't1': '수중펌프', 't2': '1000 이상 kW', 't3': '서울특별시', 't4': '중구', 't5': '34', 't6': '29', 't7': '0', 't8': '5', 't9': '0', 't10':'allow'},
        { 't1': '수중펌프', 't2': '1000 이상 kW', 't3': '서울특별시', 't4': '중구', 't5': '34', 't6': '29', 't7': '0', 't8': '5', 't9': '0', 't10':'reject'}
      ];
    
    $("#jqgrid2").jqGrid({
    data: mydata1,
    datatype: "local",
    useColSpanStyle: true,
    groupHeaders:[
      {startColumnName:'t3',numberofColumns:2,titleText:'기관'}
    ],
    colNames: ['자원명','규격','시도','시군구','보유현황','적정 보유량','수락 대기','응원 가능량','수락 수량', '요청처리'],
    colModel: [
      { name: 't1'},
      { name: 't2'},
      { name: 't3' },
      { name: 't4' },
      { name: 't5' },
      { name: 't6',classes:'font_navy'},
      { name: 't7' },
      { name: 't8' },
      { name: 't9',  formatter:iptNum },
      { name: 't10',  formatter:tblBtn2 }
    ],
    height: 'auto',  
    viewrecords: true,
    rowTotal: -1,
    autowidth: true,
    pager: "#pager_tab02",
  });

   var mydata3 = [
    { 't1': '2023-07-31', 't2': '서울특별시', 't3': '용산구', 't4': '자연재난/태풍', 't5': '수중펌프', 't6': '1000 이상 kW', 't7': '대', 't8': '장비', 't9': 'A','t10':'9','t11':'11','t12':'allowed'},
    { 't1': '2023-07-31', 't2': '서울특별시', 't3': '용산구', 't4': '자연재난/태풍', 't5': '수중펌프', 't6': '1000 이상 kW', 't7': '대', 't8': '장비', 't9': 'A','t10':'9','t11':'11','t12':'canceled'},
    { 't1': '2023-07-31', 't2': '서울특별시', 't3': '용산구', 't4': '자연재난/태풍', 't5': '수중펌프', 't6': '1000 이상 kW', 't7': '대', 't8': '장비', 't9': 'A','t10':'9','t11':'11','t12':'hold'},
    { 't1': '2023-07-31', 't2': '서울특별시', 't3': '용산구', 't4': '자연재난/태풍', 't5': '수중펌프', 't6': '1000 이상 kW', 't7': '대', 't8': '장비', 't9': 'A','t10':'9','t11':'11','t12':'rejected'},
  ];
   $("#jqgrid3").jqGrid({
    data: mydata3,
    datatype: "local",
    useColSpanStyle: true,
    groupHeaders:[
      {startColumnName:'t3',numberofColumns:2,titleText:'기관'}
    ],
    colNames: ['응원 접수일자','시도','시군구','재난구분','자원명','규격','단위','자원구분','재난관리자원 등급','응원 요청 수량','수락 수량','상태'],
    colModel: [
      { name: 't1'},
      { name: 't2'},
      { name: 't3' },
      { name: 't4' },
      { name: 't5' },
      { name: 't6'},
      { name: 't7' },
      { name: 't8' },
      { name: 't9' },
      { name: 't10' },
      { name: 't11'},
      { name: 't12',  formatter:status }
    ],
    height: 'auto',  
    viewrecords: true,
    rowTotal: -1,
    autowidth: true,
    pager: "#pager_tab02",
  });
  function iptNum(cellValue, options, rowdata, action){
    var html, txt = "";
    var type = options.colModel.icotype;
    html = `<input type="number" class="alignC" min="0" title="${cellValue}" value="${cellValue}" onchange="changeEvt(this);" />`;
    return html;
  } 
  function changeEvt(e){
    (e.value != 0)?e.style.color='red':e.style.color='inherit';
  }
  function tblBtn2(cellValue, options, rowdata, action) {
    var html, color, txt = "";
    switch (cellValue) {
      case "request":
        txt = "응원요청";
        color = 'blueline'
        break;
      case "cancel":
        txt = "요청취소";
        color = 'redline';
        break;
      case "allow":
        color = "blueline";
        txt = "응원수락";
        break;
      case "reject":
        txt = "거절";
        color = 'redline';
        break;
      default:
        txt = "none";
    }
    html = `<button type="button" class="btn_s btn_${color} btn_${cellValue}"> ${txt}</button>`;
    return html;
  }
  function status(cellValue, options, rowdata, action){
    var html;
    switch (cellValue) {
      case "hold":
        html = `수락대기중 <button type="button" class="axi btn_move" title="응원 수락 이동">응원 수락 이동</button>`;
        break;
      case "canceled":
        html = `<span class='font_orange'>요청취소</span>`;
        break;
      case "allowed":
        html = `<span class='font_navy'>응원수락</span>`;
        break;
      case "rejected":
        html =  `<span class='font_orange'>응원거절</span>`;
        break;
      default:
        html = "none";
    }
    return html;
  }
  function axiBtn(cellValue, options, rowdata, action){
    var html, txt = "";
    var type = options.colModel.icotype;
    html = `<button type="button" class="axi btn_${type}" title="자원정보 설정">${cellValue}</button>`;
    return html;
  } 
  </script>
  

</body>

</html>